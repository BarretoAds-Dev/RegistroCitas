---
interface Props {
	currentStep: number;
}

const { currentStep } = Astro.props;
const progress = ((currentStep - 1) / 3) * 100;

const getStepClass = (stepNum: number): string => {
	if (stepNum < currentStep) {
		return 'w-10 h-10 rounded-full bg-[#003d82] backdrop-blur-xl text-white flex items-center justify-center font-bold text-sm shadow-md shadow-black/20 border-2 border-[#00a0df]/60 transition-all duration-300';
	} else if (stepNum === currentStep) {
		return 'w-10 h-10 rounded-full bg-[#003d82] backdrop-blur-xl text-white flex items-center justify-center font-bold text-sm shadow-md shadow-black/20 border-2 border-[#00a0df]/60 transition-all duration-300 scale-110';
	} else {
		return 'w-10 h-10 rounded-full bg-slate-700/50 backdrop-blur-xl text-gray-400 flex items-center justify-center font-bold text-sm border-2 border-slate-600/50 transition-all duration-300';
	}
};

const renderStepContent = (stepNum: number): string => {
	if (stepNum < currentStep) {
		return `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
			<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
		</svg>`;
	} else if (stepNum === 4 && stepNum !== currentStep) {
		return `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
			<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
		</svg>`;
	}
	return stepNum.toString();
};
---

<div class="mb-8 max-w-2xl mx-auto">
	<div class="flex items-center justify-between relative">
		<!-- Línea de progreso -->
		<div class="absolute top-5 left-0 w-full h-0.5 bg-slate-700/50 backdrop-blur-sm -z-10">
			<div 
				class="h-full bg-[#00a0df] backdrop-blur-sm transition-all duration-500 ease-out shadow-sm shadow-[#00a0df]/15" 
				style={`width: ${progress}%`}
			></div>
		</div>
		
		<!-- Paso 1: Fecha -->
		<div class="flex flex-col items-center flex-1">
			<div class={getStepClass(1)} set:html={renderStepContent(1)}></div>
			<span class="mt-2 text-xs font-semibold text-gray-200 uppercase tracking-wide">Fecha</span>
		</div>
		
		<!-- Paso 2: Hora -->
		<div class="flex flex-col items-center flex-1">
			<div class={getStepClass(2)} set:html={renderStepContent(2)}></div>
			<span class="mt-2 text-xs font-semibold text-gray-500 uppercase tracking-wide">Hora</span>
		</div>
		
		<!-- Paso 3: Información -->
		<div class="flex flex-col items-center flex-1">
			<div class={getStepClass(3)} set:html={renderStepContent(3)}></div>
			<span class="mt-2 text-xs font-semibold text-gray-500 uppercase tracking-wide">Información</span>
		</div>
		
		<!-- Paso 4: Confirmación -->
		<div class="flex flex-col items-center flex-1">
			<div class={getStepClass(4)} set:html={renderStepContent(4)}></div>
			<span class="mt-2 text-xs font-semibold text-gray-500 uppercase tracking-wide">Confirmar</span>
		</div>
	</div>
</div>

